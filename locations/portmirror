# portmirror

if $ARGS[0] = 'start':
	cls
	gs 'stat'
	*pl '<center><img src="<<FUNC(''$face_image'')>>"></center>'
	*nl
	if daystart < 10 and StoryLine = 0:'In the mirror, you see a strange woman''s face looking back at you that exactly copies all your actions. You can hardly accept the idea that this is now you.'
	if daystart >= 10 and daystart < 30 and StoryLine = 0:'In the mirror you see a woman''s face to which you have become accustomed to. But sometimes, you get the feel that this is not your face.'
	*pl '<<$hair>>'
	*pl '<<$pcs_makeup>>. <<$lip>>'
	*pl '<<$skin>>'
	*pl '<<$pcs_apprnc>>'

	if curly > 0 and defcurly = 0: '<br>Your curly hair will last for another <<curly>> days.'
	if straight > 0 and defcurly = 1: '<br>Your straightened hair will last for another <<straight>> days.'
	if hbraids > 0: '<br>Your braided hair will last for another <<hbraids>> days.'
	if pcs_haircol ! nathcol:
		if dyefade > 0 and dyefade < 7: '<br>Your hair dye is beginning to fade and your roots are showing.'
		if dyefade = 0: '<br>Your hair dye has faded and looks terrible.'
	end

	$makeUpString = '<br>'

	if kosmetica > 0: $makeUpString += 'Cosmetics: <<kosmetica>>'
	if kosmetica = 0: $makeUpString += 'You have no makeup'

	if lipbalm > 0: $makeUpString += ' | Lip Balm: <<lipbalm>>'
	if lipbalm = 0: $makeUpString += ' | You have no lip balm left'

	*pl $makeUpString
	*nl

	$makeupLight = 'You subtly apply some neutral tones, with a light application of makeup to bring out your natural beauty.'
	$makeupNatural = 'You apply some mildly vibrant tones and colors of makeup to cover your minor imperfections and enhance your best features.'
	$makeupHeavy = 'You apply some deeper, richer shades of makeup, thick enough to cover most imperfections, while drawing attention to your eyes and lips.'
	$brushHair = 'You brush your hair.'
	$applyLipbalm = 'You apply some moisturizing balm on your lips.'

	! WD: Cheat Unused ~ 'AutoHapri'
	if pcs_hairbsh = 0 and AutoHapri = 1:
		minut += 3
		pcs_hairbsh = 1
		*pl $brushHair
	end

	!! WD: Cheat Unused ~ 'AutoMakeup'
	if pcs_makeup = 1 and kosmetica > 0 and AutoMakeup = 1:
		pcs_makeup = AutoMakeupType
		makupskl_exp += rand(1,3)
		if kosmetica < 3 and pcs_makeup = 4:pcs_makeup = 3
		if kosmetica < 2 and pcs_makeup = 3:pcs_makeup = 2
		if kosmetica < 1 and pcs_makeup ! 1:
			pcs_makeup = 1
			'You have no make-up left.'
		else
			if pcs_makeup = 2:
				*pl $makeupLight
				minut -= 3
				kosmetica -= 1
			end

			if pcs_makeup = 3:
				*pl $makeupNatural
				minut -= 5
				kosmetica -= 2
			end

			if pcs_makeup = 4:
				*pl $makeupHeavy
				minut -= 10
				vidageday -= 1
				kosmetica -= 3
			end
		end
	end

	! WD: Cheat Unused ~ 'AutoLipBalm'
	if lipbalm > 0 and pcs_lipbalm <= 0 and AutoLipBalm = 1:
		minut -= 10
		lipbalm -= 1
		lipkoef += rand(0, 1)
		if lipkoef > 50:
			lipkoef = 0
			pcs_lip += 1
		end

		pcs_lipbalm += 8
		*pl $applyLipbalm
	end

	if pcs_hairbsh = 0:
		act 'Brush your hair': gt 'portmirror', 'brush'
	end

	!! Added the makeup setting.

	if pcs_makeup = 1 and kosmetica >= makeupSetting:
		act 'Apply makeup':
			cla
			*clr
			'<center><img src="images/pc/mop.jpg"></center>'
			*nl
			*pl 'You consider for a moment which look you want to go for.'
			*nl
			if makeupSetting = 1:
				cla
				'Without thinking, you instantly apply a sutle amount of makeup to your face.'
				minut += 3
				makupskl_exp += rand(1,3)
				kosmetica -= 1
				pcs_makeup = 2
				*pl $makeupLight
				act 'View results':gt 'portmirror', 'start'
			elseif makeupSetting = 2:
				cla
				'Without thinking, you instantly apply a moderate amount of makeup to your face.'
				minut += 5
				makupskl_exp += rand(1,3)
				kosmetica -= 2
				pcs_makeup = 3
				*pl $makeupNatural
				act 'View results':gt 'portmirror', 'start'
			elseif makeupSetting = 3:
				cla
				'Without thinking, you instantly apply a heavy amount of makeup to your face.'
				minut += 10
				makupskl_exp += rand(1,3)
				kosmetica -= 3
				vidageday -= 1
				pcs_makeup = 4
				*pl $makeupHeavy
				act 'View results':gt 'portmirror', 'start'
			else
				if kosmetica > 0:
					act 'Light make-up':
						cla
						minut += 3
						makupskl_exp += rand(1,3)
						kosmetica -= 1
						pcs_makeup = 2
						*pl $makeupLight
						act 'View results':gt 'portmirror', 'start'
					end
				end

				if kosmetica > 1:
					act 'Natural makeup':
						cla
						minut += 5
						makupskl_exp += rand(1,3)
						kosmetica -= 2
						pcs_makeup = 3
						*pl $makeupNatural
						act 'View results':gt 'portmirror', 'start'
					end
				end

				if kosmetica > 2:
					act 'Heavy makeup':
						cla
						minut += 10
						makupskl_exp += rand(1,3)
						kosmetica -= 3
						vidageday -= 1
						pcs_makeup = 4
						*pl $makeupHeavy
						act 'View results':gt 'portmirror', 'start'
					end
				end

				act 'No makeup':
					cla
					minut += 2
					'After looking in the mirror, you decide that you look fine and don''t need to put on any makeup, especially since you''ll likely be washing it off in a few hours.'
					act 'View results':gt 'portmirror', 'start'
				end
			end
		end
	elseif kosmetica < makeupSetting:
		'You don''t have enough makeup to apply your chosen option.'
	end

	if lipbalm > 0 and pcs_lipbalm <= 0:
		act 'Apply lip balm':
			cla
			minut += 10
			lipbalm -= 1
			lipkoef += rand(0, 1)
			if lipkoef > 50:
				lipkoef = 0
				pcs_lip += 1
			end

			pcs_lipbalm += 8
			*pl $applyLipbalm
			act 'View results':gt 'portmirror', 'start'
		end
	end

	if pcs_hairbsh = 0 or (pcs_makeup > 0 and kosmetica > 0) or (lipbalm > 0 and pcs_lipbalm <= 0):
		act 'Do the works': gt 'portmirror', 'works'
	end

	!!New makeup setting
	!!This imforms the person what makeup they have pre selected
	!! 0 - none, 1 - light, 2 - moderate, 3 - heavy

	'Select level for auto make-up: <a href="exec:makeupSetting = 0 & gt ''portmirror'', ''start''">none</a>, <a href="exec:makeupSetting = 1 & gt ''portmirror'', ''start''">light</a>, <a href="exec:makeupSetting = 2 & gt ''portmirror'', ''start''">vibrant</a>, <a href="exec:makeupSetting = 3 & gt ''portmirror'', ''start''">thick</a>.'

	if makeupSetting = 0:
		'Currently you have no make-up set.'
	elseif makeupSetting = 1:
		'Currently the level you have set is for light make-up.'
	elseif makeupSetting = 2:
		'Currently the level you have set is for vibrant make-up.'
	elseif makeupSetting = 3:
		'Currently the level you have set is for thick make-up.'
	end

	act 'Move away from the mirror':gt '<<$gt1>>', '<<$gt2>>'
end

if $ARGS[0] = 'brush':
	cla
	minut += 3
	pcs_hairbsh = 1
	*pl $brushHair
	act 'View results':gt 'portmirror', 'start'
end

if $ARGS[0] = 'works':
	cla
	if kosmetica <= 0:
		'You don''t have any makeup.'
	elseif pcs_makeup = 1 and kosmetica >= makeupSetting:
		*clr
		'<center><img src="images/pc/mop.jpg"></center>'
		*nl
		*pl 'You consider for a moment which look you want to go for.'
		*nl
		if makeupSetting = 1:
			'Without thinking, you instantly apply a sutle amount of makeup to your face.'
			minut += 3
			makupskl_exp += rand(1,3)
			kosmetica -= 1
			pcs_makeup = 2
			*pl $makeupLight
		elseif makeupSetting = 2:
			'Without thinking, you instantly apply a moderate amount of makeup to your face.'
			minut += 5
			makupskl_exp += rand(1,3)
			kosmetica -= 2
			pcs_makeup = 3
			*pl $makeupNatural
		elseif makeupSetting = 3:
			'Without thinking, you instantly apply a heavy amount of makeup to your face.'
			minut += 10
			makupskl_exp += rand(1,3)
			kosmetica -= 3
			vidageday -= 1
			pcs_makeup = 4
			*pl $makeupHeavy
		else
			if kosmetica > 0:
				act 'Light make-up':
					cla
					minut += 3
					makupskl_exp += rand(1,3)
					kosmetica -= 1
					pcs_makeup = 2
					*pl $makeupLight
					act 'View results':gt 'portmirror', 'start'
				end
			end

			if kosmetica > 1:
				act 'Natural makeup':
					cla
					minut += 5
					makupskl_exp += rand(1,3)
					kosmetica -= 2
					pcs_makeup = 3
					*pl $makeupNatural
					act 'View results':gt 'portmirror', 'start'
				end
			end

			if kosmetica > 2:
				act 'Heavy makeup':
					cla
					minut += 10
					makupskl_exp += rand(1,3)
					kosmetica -= 3
					vidageday -= 1
					pcs_makeup = 4
					*pl $makeupHeavy
					act 'View results':gt 'portmirror', 'start'
				end
			end
		end
	elseif kosmetica < makeupSetting:
		'You don''t have enough makeup to apply your chosen option.'
	end
	if pcs_hairbsh = 0:
		minut += 3
		pcs_hairbsh = 1
		*pl $brushHair
	end

	if lipbalm > 0 and pcs_lipbalm <= 0:
		minut += 10
		lipbalm -= 1
		lipkoef += rand(0, 1)
		if lipkoef > 50:
			lipkoef = 0
			lip += 1
		end
		pcs_lipbalm += 8
		*pl $applyLipbalm
	end

	act 'View results':gt 'portmirror', 'start'
end

--- portmirror ---------------------------------

